<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teacher Dashboard</title>
    <!-- Removed external FontAwesome link for speed -->
    <style>
        :root {
            --primary-color: #0F9E99;
            --primary-hover: #0b7a76;
            --bg-color: #EFE9E0;
            --card-bg: #FFFFFF;
            --text-color: #333333;
            --accent-green: #25D366;
            --error-red: #d32f2f;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }

        /* --- LOGIN OVERLAY STYLES --- */
        #loginOverlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background-color: var(--bg-color);
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .login-box {
            background-color: var(--card-bg);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            text-align: center;
            width: 90%;
            max-width: 320px;
        }
        .login-icon {
            width: 50px; height: 50px;
            fill: var(--primary-color);
            margin-bottom: 20px;
        }

        /* --- TOP RIGHT MENU STYLES --- */
        .top-nav {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .menu-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            transition: background 0.3s;
        }

        .menu-btn:hover { background-color: var(--primary-hover); }

        .menu-btn svg { width: 24px; height: 24px; fill: white; }

        .dropdown-content {
            display: none;
            position: absolute;
            right: 0;
            top: 60px;
            background-color: white;
            min-width: 200px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            border-radius: 12px;
            overflow: hidden;
            z-index: 1001;
            animation: fadeIn 0.2s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .dropdown-content a {
            color: var(--text-color);
            padding: 15px 20px;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 1px solid #f0f0f0;
            font-size: 16px;
            font-weight: 500;
        }

        .dropdown-content a:last-child { border-bottom: none; }
        .dropdown-content a:hover { background-color: #f9f9f9; color: var(--primary-color); }
        .dropdown-content a svg { width: 18px; height: 18px; fill: currentColor; }

        .show-menu { display: block; }

        /* --- CONTAINER & DASHBOARD --- */
        .container {
            width: 100%;
            display: flex;
            justify-content: center;
            padding: 40px 20px;
            margin-top: 40px; /* Space for the menu on mobile if needed */
        }

        .dashboard-card {
            background-color: var(--card-bg);
            padding: 40px 30px;
            border-radius: 20px;
            box-shadow: 0 8px 20px rgba(15, 158, 153, 0.15);
            width: 100%;
            max-width: 400px;
            text-align: center;
            border-top: 6px solid var(--primary-color);
        }

        h2 {
            color: var(--primary-color);
            margin-top: 0;
            margin-bottom: 25px;
            font-size: 26px;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        h2 svg {
            fill: var(--primary-color);
            width: 28px;
            height: 28px;
        }

        /* Unified Button Styles */
        .action-btn, .action-row, .modal-trigger-btn {
            display: flex;
            align-items: center;
            background-color: var(--primary-color);
            color: white;
            margin-bottom: 15px;
            border-radius: 12px;
            text-decoration: none;
            font-size: 18px;
            font-weight: 600;
            transition: all 0.2s ease-in-out;
            border: 2px solid transparent;
            box-sizing: border-box;
            cursor: pointer;
            width: 100%;
            border: none;
            font-family: inherit;
            padding: 16px 20px;
            text-align: left;
        }

        /* Special layout for the row with input */
        .action-row {
            padding: 10px 15px; 
            justify-content: space-between; 
            flex-wrap: wrap; 
        }

        /* SVG Icon Styling */
        .action-btn svg, .label-part svg, .modal-trigger-btn svg.main-icon {
            width: 24px;
            height: 24px;
            fill: currentColor;
            margin-right: 15px;
            padding-right: 15px;
            border-right: 1px solid rgba(255,255,255,0.2);
            flex-shrink: 0;
        }

        /* UPDATED: Label part is now an anchor tag */
        a.label-part { 
            display: flex; 
            align-items: center;
            flex-grow: 1; /* Allows the click area to expand */
            text-decoration: none;
            color: inherit;
            height: 100%;
        }

        .small-input {
            width: 60px;
            padding: 8px;
            border-radius: 8px;
            border: none;
            outline: none;
            text-align: center;
            font-weight: bold;
            color: var(--text-color);
            margin: 0 10px;
            font-size: 16px;
        }

        .inline-send-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 10px 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .inline-send-btn svg {
            width: 18px;
            height: 18px;
            fill: currentColor;
        }

        .inline-send-btn:hover { background-color: var(--accent-green); }

        .action-btn:hover, .action-row:hover, .modal-trigger-btn:hover {
            background-color: var(--primary-hover);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        /* --- MODAL STYLES --- */
        .modal {
            display: none; 
            position: fixed; 
            z-index: 1000; 
            left: 0;
            top: 0;
            width: 100%; 
            height: 100%; 
            overflow: auto; 
            background-color: rgba(0,0,0,0.5);
            backdrop-filter: blur(4px);
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 25px;
            border: 1px solid #888;
            width: 90%;
            max-width: 350px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            animation: slideIn 0.3s ease-out;
            position: relative;
        }

        @keyframes slideIn {
            from {transform: translateY(-50px); opacity: 0;}
            to {transform: translateY(0); opacity: 1;}
        }

        .close-modal {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            position: absolute;
            right: 20px;
            top: 10px;
            line-height: 1;
        }

        .close-modal:hover { color: var(--primary-color); }

        .modal h3 {
            color: var(--primary-color);
            margin-top: 0;
            text-align: center;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .modal h3 svg {
            fill: var(--primary-color);
            width: 24px;
            height: 24px;
        }

        .form-group { margin-bottom: 12px; }

        .form-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            box-sizing: border-box;
            transition: border-color 0.3s;
        }

        .form-input:focus { border-color: var(--primary-color); outline: none; }

        .submit-btn {
            width: 100%;
            padding: 14px;
            background-color: var(--accent-green);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.2s;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .submit-btn svg {
            width: 20px;
            height: 20px;
            fill: currentColor;
        }

        .submit-btn:hover { background-color: #1ebc57; }

        /* Spinner Animation */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .spinner {
            animation: spin 1s linear infinite;
        }

        /* Status Message Styles */
        #statusMsg, #sessionStatusMsg {
            width: 100%;
            font-size: 14px;
            margin-top: 10px;
            display: none;
            padding: 8px;
            border-radius: 8px;
            text-align: center;
            word-break: break-word;
            flex-basis: 100%; /* Forces status message to new line in flex wrap */
        }
        .status-error { background-color: #ffebee; color: var(--error-red); border: 1px solid var(--error-red); }
        .status-success { background-color: #e8f5e9; color: #2e7d32; border: 1px solid #2e7d32; }

        @media (max-width: 480px) {
            .dashboard-card { padding: 30px 20px; }
            .action-btn, .action-row, .modal-trigger-btn { font-size: 16px; }
            .small-input { width: 50px; }
        }
    </style>
</head>
<body>
    
    <!-- LOGIN OVERLAY -->
    <div id="loginOverlay">
        <div class="login-box">
            <!-- Lock Icon -->
            <svg class="login-icon" viewBox="0 0 448 512"><path d="M144 144v48H304V144c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192V144C80 64.5 144.5 0 224 0s144 64.5 144 144v48h16c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V256c0-35.3 28.7-64 64-64H80z"/></svg>
            <h3 style="margin-top:0; color:var(--primary-color);">Security Check</h3>
            <div class="form-group">
                <input type="password" id="loginPass" class="form-input" placeholder="Enter Password">
            </div>
            <button onclick="checkLogin()" class="submit-btn">Unlock</button>
            <p id="loginError" style="color: var(--error-red); display:none; margin-top:10px; font-weight:bold;">Incorrect Password</p>
        </div>
    </div>

    <!-- MAIN MENU (Top Right) -->
    <div class="top-nav">
        <button class="menu-btn" onclick="toggleMenu()">
            <!-- Hamburger Icon -->
            <svg viewBox="0 0 448 512"><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg>
        </button>
        <div id="mainMenu" class="dropdown-content">
            <a href="data-View.html">
                <!-- User Icon -->
                <svg viewBox="0 0 448 512"><path d="M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"/></svg>
                Student View
            </a>
            <a href="Hw.html">
                <!-- Book Icon -->
                <svg viewBox="0 0 448 512"><path d="M96 0C43 0 0 43 0 96V416c0 53 43 96 96 96H384h32c17.7 0 32-14.3 32-32s-14.3-32-32-32V384c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H384 96zm0 384H352v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16H336c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16zm0 64c0-8.8 7.2-16 16-16H336c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16zm0 64c0-8.8 7.2-16 16-16H336c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16z"/></svg>
                Send HW
            </a>
            <a href="attendance.html">
                <!-- Check Icon -->
                <svg viewBox="0 0 448 512"><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"/></svg>
                Send Attend
            </a>
        </div>
    </div>

    <div class="container">
        <div class="dashboard-card">
            <h2>
                <!-- Graduation Cap Icon -->
                <svg viewBox="0 0 640 512"><path d="M622.34 153.2L343.4 67.5c-15.2-4.67-31.6-4.67-46.79 0L17.66 153.2c-23.54 7.23-23.54 40.36 0 47.59l279 85.85c15.2 4.67 31.6 4.67 46.79 0l20.59-6.33V320c0 17.67 14.33 32 32 32s32-14.33 32-32V270.8l194.3-59.8c23.54-7.23 23.54-40.36 0-47.59zM320 352c-44.19 0-86.67-9.9-122.4-26.48-5.33-2.48-11.69.17-13.36 6.08l-14.72 52.38c-1.84 6.54 2.05 13.3 8.42 15.18C219.7 411.6 268.3 416 320 416c51.7 0 100.3-4.41 142.1-16.84 6.37-1.89 10.26-8.64 8.42-15.18l-14.72-52.38c-1.67-5.91-8.03-8.56-13.36-6.08C406.7 342.1 364.2 352 320 352z"/></svg>
                Dashboard
            </h2>
            
            <!-- 1. Combined Attendance Section -->
            <div class="action-row">
                <a href="attend.html" class="label-part" title="Go to Attendance Page">
                    <svg viewBox="0 0 448 512"><path d="M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zM337 209L209 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L303 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"/></svg>
                    <span>Attendance</span>
                </a>
                
                <div style="display:flex; align-items:center;">
                    <input type="number" id="attNumber" class="small-input" placeholder="#">
                    <button onclick="sendAttendance()" class="inline-send-btn">
                        <svg viewBox="0 0 512 512"><path d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480V396.4c0-4 1.5-7.8 4.2-10.7L331.8 202.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8 17.7 316.6C7.1 311.3 .3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z"/></svg>
                    </button>
                </div>
                
                <div id="statusMsg"></div>
            </div>

            <a href="Hw.html" class="action-btn">
                <svg viewBox="0 0 448 512"><path d="M96 0C43 0 0 43 0 96V416c0 53 43 96 96 96H384h32c17.7 0 32-14.3 32-32s-14.3-32-32-32V384c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H384 96zm0 384H352v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16H336c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16zm0 64c0-8.8 7.2-16 16-16H336c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16zm0 64c0-8.8 7.2-16 16-16H336c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16z"/></svg>
                Send HW
            </a>
            
            <a href="http://bulkwaha_bot.com" class="action-btn">
                <svg viewBox="0 0 448 512"><path d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7 .9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"/></svg>
                Send Marks File
            </a>

            <!-- New Session Modal Trigger Button -->
            <button class="modal-trigger-btn" onclick="openModal()">
                <svg class="main-icon" viewBox="0 0 576 512"><path d="M0 128C0 92.7 28.7 64 64 64H320c35.3 0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128zM559.1 99.8c10.4 5.6 16.9 16.4 16.9 28.2V384c0 11.8-6.5 22.6-16.9 28.2s-23 5-32.9-1.6l-96-64L416 337.1V320 192 174.9l14.2-9.5 96-64c9.8-6.5 22.4-7.2 32.9-1.6z"/></svg>
                <span>Add Session</span>
            </button>

        </div>
    </div>

    <!-- The Modal -->
    <div id="sessionModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <h3>
                <svg viewBox="0 0 576 512"><path d="M0 128C0 92.7 28.7 64 64 64H320c35.3 0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128zM559.1 99.8c10.4 5.6 16.9 16.4 16.9 28.2V384c0 11.8-6.5 22.6-16.9 28.2s-23 5-32.9-1.6l-96-64L416 337.1V320 192 174.9l14.2-9.5 96-64c9.8-6.5 22.4-7.2 32.9-1.6z"/></svg>
                Session Details
            </h3>
            
            <div class="form-group">
                <input type="text" id="zoomLink" class="form-input" placeholder="Zoom Link">
            </div>
            <div class="form-group">
                <input type="text" id="zoomId" class="form-input" placeholder="Zoom ID">
            </div>
            <div class="form-group">
                <input type="text" id="zoomPass" class="form-input" placeholder="Zoom Password">
            </div>
            <div class="form-group">
                <input type="number" id="sessionNum" class="form-input" placeholder="Session Number">
            </div>
            
            <button onclick="sendSessionDetails()" id="btnSession" class="submit-btn">
                <svg viewBox="0 0 512 512"><path d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480V396.4c0-4 1.5-7.8 4.2-10.7L331.8 202.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8 17.7 316.6C7.1 311.3 .3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z"/></svg>
                Send Details
            </button>
            <div id="sessionStatusMsg"></div>
        </div>
    </div>

    <script>
        // --- LOGIN LOGIC ---
        if (sessionStorage.getItem('isLoggedIn') === 'true') {
            document.getElementById('loginOverlay').style.display = 'none';
        }

        function checkLogin() {
            const pass = document.getElementById('loginPass').value;
            if (pass === "MoMohamed1") {
                document.getElementById('loginOverlay').style.display = 'none';
                sessionStorage.setItem('isLoggedIn', 'true');
            } else {
                document.getElementById('loginError').style.display = 'block';
            }
        }
        
        document.getElementById('loginPass').addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
                checkLogin();
            }
        });

        // --- MENU TOGGLE LOGIC ---
        function toggleMenu() {
            document.getElementById("mainMenu").classList.toggle("show-menu");
        }

        // Close menu if user clicks outside of it
        window.onclick = function(event) {
            if (!event.target.matches('.menu-btn') && !event.target.closest('.menu-btn')) {
                var dropdowns = document.getElementsByClassName("dropdown-content");
                for (var i = 0; i < dropdowns.length; i++) {
                    var openDropdown = dropdowns[i];
                    if (openDropdown.classList.contains('show-menu')) {
                        openDropdown.classList.remove('show-menu');
                    }
                }
            }
            // Also close modal if clicking outside
            if (event.target == document.getElementById("sessionModal")) {
                closeModal();
            }
        }

        // --- EXISTING APP LOGIC ---
        const spinnerSVG = `<svg class="spinner" viewBox="0 0 512 512"><path d="M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z" fill="currentColor"/></svg>`;
        const modal = document.getElementById("sessionModal");

        function openModal() { modal.style.display = "flex"; }
        function closeModal() {
            modal.style.display = "none";
            document.getElementById('sessionStatusMsg').style.display = 'none';
        }

        function showStatus(elementId, msg, type) {
            const el = document.getElementById(elementId);
            el.style.display = 'block';
            el.className = type === 'error' ? 'status-error' : 'status-success';
            el.innerText = msg;
        }

        function sendAttendance() {
            const number = document.getElementById('attNumber').value;
            const btn = document.querySelector('.inline-send-btn');
            const originalContent = btn.innerHTML;
            
            if (!number) {
                showStatus('statusMsg', "Please enter a number.", "error");
                return;
            }

            document.getElementById('statusMsg').style.display = 'none';
            const targetUrl = "https://api.mark-attendance.com/webhook/809cc1ba-5021-41ea-8313-af352f55efd7";
            const proxyUrl = "https://corsproxy.io/?" + encodeURIComponent(targetUrl);

            btn.innerHTML = spinnerSVG;
            btn.disabled = true;

            fetch(proxyUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
                body: JSON.stringify({ number: number.toString() }) 
            })
            .then(async response => {
                const text = await response.text();
                if (response.ok) {
                    showStatus('statusMsg', "Success! Attendance sent.", "success");
                    document.getElementById('attNumber').value = ''; 
                } else {
                    let displayMsg = `Error (${response.status})`;
                    try { const jsonError = JSON.parse(text); if(jsonError.message) displayMsg += `: ${jsonError.message}`; else displayMsg += `: ${text}`; } catch(e) { displayMsg += `: ${text}`; }
                    showStatus('statusMsg', displayMsg.substring(0, 100), "error");
                }
            })
            .catch(error => { showStatus('statusMsg', "Network/Proxy Error. Try again.", "error"); })
            .finally(() => { btn.innerHTML = originalContent; btn.disabled = false; });
        }

        function sendSessionDetails() {
            const zoomLink = document.getElementById('zoomLink').value;
            const zoomId = document.getElementById('zoomId').value;
            const zoomPass = document.getElementById('zoomPass').value;
            const sessionNum = document.getElementById('sessionNum').value;
            const btn = document.getElementById('btnSession');
            const originalContent = btn.innerHTML;

            if (!zoomLink || !zoomId || !zoomPass || !sessionNum) {
                showStatus('sessionStatusMsg', "Please fill in all fields.", "error");
                return;
            }

            document.getElementById('sessionStatusMsg').style.display = 'none';
            const targetUrl = "https://api.mark-attendance.com/webhook/session-details";
            const proxyUrl = "https://corsproxy.io/?" + encodeURIComponent(targetUrl);

            btn.innerHTML = spinnerSVG + " Sending...";
            btn.disabled = true;

            const payload = { zoomLink: zoomLink, zoomId: zoomId, zoomPassword: zoomPass, sessionNumber: parseInt(sessionNum) };

            fetch(proxyUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
                body: JSON.stringify(payload)
            })
            .then(async response => {
                const text = await response.text();
                if (response.ok) {
                    showStatus('sessionStatusMsg', "Session Details Sent!", "success");
                } else {
                    let displayMsg = `Error (${response.status})`;
                    try { const jsonError = JSON.parse(text); if(jsonError.message) displayMsg += `: ${jsonError.message}`; } catch(e) { displayMsg += `: ${text}`; }
                    showStatus('sessionStatusMsg', displayMsg.substring(0, 60), "error");
                }
            })
            .catch(error => { showStatus('sessionStatusMsg', "Network Error. Check connection.", "error"); })
            .finally(() => { btn.innerHTML = originalContent; btn.disabled = false; });
        }
    </script>
</body>
</html>
